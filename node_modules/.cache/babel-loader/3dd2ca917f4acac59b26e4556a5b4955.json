{"ast":null,"code":"import { microSeconds as micro, isNode, PROMISE_RESOLVED_VOID } from '../util';\nexport var microSeconds = micro;\nexport var type = 'native';\nexport function create(channelName) {\n  var state = {\n    messagesCallback: null,\n    bc: new BroadcastChannel(channelName),\n    subFns: [] // subscriberFunctions\n\n  };\n\n  state.bc.onmessage = function (msg) {\n    if (state.messagesCallback) {\n      state.messagesCallback(msg.data);\n    }\n  };\n\n  return state;\n}\nexport function close(channelState) {\n  channelState.bc.close();\n  channelState.subFns = [];\n}\nexport function postMessage(channelState, messageJson) {\n  try {\n    channelState.bc.postMessage(messageJson, false);\n    return PROMISE_RESOLVED_VOID;\n  } catch (err) {\n    return Promise.reject(err);\n  }\n}\nexport function onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\nexport function canBeUsed() {\n  /**\n   * in the electron-renderer, isNode will be true even if we are in browser-context\n   * so we also check if window is undefined\n   */\n  if (isNode && typeof window === 'undefined') return false;\n\n  if (typeof BroadcastChannel === 'function') {\n    if (BroadcastChannel._pubkey) {\n      throw new Error('BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill');\n    }\n\n    return true;\n  } else return false;\n}\nexport function averageResponseTime() {\n  return 150;\n}\nexport default {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};","map":{"version":3,"sources":["/Users/bryan/solana-crowdfunding/.yarn/cache/broadcast-channel-npm-4.10.0-0b9fa2f9e0-2be7a5c0a2.zip/node_modules/broadcast-channel/dist/esbrowser/methods/native.js"],"names":["microSeconds","micro","isNode","PROMISE_RESOLVED_VOID","type","create","channelName","state","messagesCallback","bc","BroadcastChannel","subFns","onmessage","msg","data","close","channelState","postMessage","messageJson","err","Promise","reject","onMessage","fn","canBeUsed","window","_pubkey","Error","averageResponseTime"],"mappings":"AAAA,SAASA,YAAY,IAAIC,KAAzB,EAAgCC,MAAhC,EAAwCC,qBAAxC,QAAqE,SAArE;AACA,OAAO,IAAIH,YAAY,GAAGC,KAAnB;AACP,OAAO,IAAIG,IAAI,GAAG,QAAX;AACP,OAAO,SAASC,MAAT,CAAgBC,WAAhB,EAA6B;AAClC,MAAIC,KAAK,GAAG;AACVC,IAAAA,gBAAgB,EAAE,IADR;AAEVC,IAAAA,EAAE,EAAE,IAAIC,gBAAJ,CAAqBJ,WAArB,CAFM;AAGVK,IAAAA,MAAM,EAAE,EAHE,CAGC;;AAHD,GAAZ;;AAOAJ,EAAAA,KAAK,CAACE,EAAN,CAASG,SAAT,GAAqB,UAAUC,GAAV,EAAe;AAClC,QAAIN,KAAK,CAACC,gBAAV,EAA4B;AAC1BD,MAAAA,KAAK,CAACC,gBAAN,CAAuBK,GAAG,CAACC,IAA3B;AACD;AACF,GAJD;;AAMA,SAAOP,KAAP;AACD;AACD,OAAO,SAASQ,KAAT,CAAeC,YAAf,EAA6B;AAClCA,EAAAA,YAAY,CAACP,EAAb,CAAgBM,KAAhB;AACAC,EAAAA,YAAY,CAACL,MAAb,GAAsB,EAAtB;AACD;AACD,OAAO,SAASM,WAAT,CAAqBD,YAArB,EAAmCE,WAAnC,EAAgD;AACrD,MAAI;AACFF,IAAAA,YAAY,CAACP,EAAb,CAAgBQ,WAAhB,CAA4BC,WAA5B,EAAyC,KAAzC;AACA,WAAOf,qBAAP;AACD,GAHD,CAGE,OAAOgB,GAAP,EAAY;AACZ,WAAOC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAP;AACD;AACF;AACD,OAAO,SAASG,SAAT,CAAmBN,YAAnB,EAAiCO,EAAjC,EAAqC;AAC1CP,EAAAA,YAAY,CAACR,gBAAb,GAAgCe,EAAhC;AACD;AACD,OAAO,SAASC,SAAT,GAAqB;AAC1B;AACF;AACA;AACA;AACE,MAAItB,MAAM,IAAI,OAAOuB,MAAP,KAAkB,WAAhC,EAA6C,OAAO,KAAP;;AAE7C,MAAI,OAAOf,gBAAP,KAA4B,UAAhC,EAA4C;AAC1C,QAAIA,gBAAgB,CAACgB,OAArB,EAA8B;AAC5B,YAAM,IAAIC,KAAJ,CAAU,qGAAV,CAAN;AACD;;AAED,WAAO,IAAP;AACD,GAND,MAMO,OAAO,KAAP;AACR;AACD,OAAO,SAASC,mBAAT,GAA+B;AACpC,SAAO,GAAP;AACD;AACD,eAAe;AACbvB,EAAAA,MAAM,EAAEA,MADK;AAEbU,EAAAA,KAAK,EAAEA,KAFM;AAGbO,EAAAA,SAAS,EAAEA,SAHE;AAIbL,EAAAA,WAAW,EAAEA,WAJA;AAKbO,EAAAA,SAAS,EAAEA,SALE;AAMbpB,EAAAA,IAAI,EAAEA,IANO;AAObwB,EAAAA,mBAAmB,EAAEA,mBAPR;AAQb5B,EAAAA,YAAY,EAAEA;AARD,CAAf","sourcesContent":["import { microSeconds as micro, isNode, PROMISE_RESOLVED_VOID } from '../util';\nexport var microSeconds = micro;\nexport var type = 'native';\nexport function create(channelName) {\n  var state = {\n    messagesCallback: null,\n    bc: new BroadcastChannel(channelName),\n    subFns: [] // subscriberFunctions\n\n  };\n\n  state.bc.onmessage = function (msg) {\n    if (state.messagesCallback) {\n      state.messagesCallback(msg.data);\n    }\n  };\n\n  return state;\n}\nexport function close(channelState) {\n  channelState.bc.close();\n  channelState.subFns = [];\n}\nexport function postMessage(channelState, messageJson) {\n  try {\n    channelState.bc.postMessage(messageJson, false);\n    return PROMISE_RESOLVED_VOID;\n  } catch (err) {\n    return Promise.reject(err);\n  }\n}\nexport function onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\nexport function canBeUsed() {\n  /**\n   * in the electron-renderer, isNode will be true even if we are in browser-context\n   * so we also check if window is undefined\n   */\n  if (isNode && typeof window === 'undefined') return false;\n\n  if (typeof BroadcastChannel === 'function') {\n    if (BroadcastChannel._pubkey) {\n      throw new Error('BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill');\n    }\n\n    return true;\n  } else return false;\n}\nexport function averageResponseTime() {\n  return 150;\n}\nexport default {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};"]},"metadata":{},"sourceType":"module"}