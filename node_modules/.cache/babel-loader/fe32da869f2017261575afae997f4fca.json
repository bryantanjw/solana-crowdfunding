{"ast":null,"code":"import { BaseWalletAdapter, WalletAccountError, WalletAdapterNetwork, WalletConfigError, WalletConnectionError, WalletDisconnectionError, WalletLoadError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSendTransactionError } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nexport const BloctoWalletName = 'Blocto';\nexport class BloctoWalletAdapter extends BaseWalletAdapter {\n  constructor() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n    this.name = BloctoWalletName;\n    this.url = 'https://blocto.app';\n    this.icon = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0ibTE5LjQ4MzggMTUuMjQ5Yy4yNzY5IDAgLjUwNDguMjA5OS41MzI1LjQ3ODhsLjAwMjIuMDQyOS0uMDA0My4xMTQyYy0uMzM1IDMuOTgzMy0zLjc5MDQgNy4xMTUxLTguMDAzNyA3LjExNTEtNC4xNzA2IDAtNy41OTg2My0zLjA2ODctNy45OTI2OS02Ljk5NDZsLS4wMTYzOC0uMTgxMS0uMDAxMDYtLjA1MzIuMDAxNzgtLjAzOThjLjAyNTk4LS4yNzA2LjI1NDg3LS40ODIzLjUzMjg5LS40ODIzeiIgZmlsbD0iI2FmZDhmNyIvPjxwYXRoIGQ9Im00LjMwMDA5IDFjMy43ODc1NSAwIDYuODI1ODEgMi45MDkxMSA2LjgyNTgxIDYuNTAyNzd2Ni4zNTM0M2MtLjAwMDQuMjkxNy0uMjM5Mi41Mjg0LS41MzQuNTI4OGwtNi4wNTc1OC4wMDMyYy0uMjk1MTEuMDAwNy0uNTM0MzItLjIzNjEtLjUzNDMyLS41Mjc4bC4wMDAzNi0xMi41NjM3NWMwLS4xNTE0OS4xMTQyNi0uMjc2MjIuMjYxOTktLjI5NDE4eiIgZmlsbD0iIzE4MmE3MSIvPjxwYXRoIGQ9Im0xOS42OTIxIDEyLjIzODMuMDM4OC4xMjgzLS4wMjg4LS4wODQ2Yy4xNjE2LjQ1MzQuMjY2Ni43NzY5LjMxNTMgMS4zNDEzLjAzMzUuMzg3OS0uMjU3LjcyODktLjY0ODUuNzYybC0uMDMwMy4wMDIyLTMuMDgwOS4wMDA3Yy0yLjEwNjMgMC0zLjgyMDQtMS40NzQxLTMuODc1Mi0zLjU0MjNsLS4wMDE0LS4xMDIxdi0zLjQ2NThjMC0uMjAxNTMuMTY5NC0uMzY5NTkuMzc0MS0uMzYwMDcgMy4zMDAzLjE1NDY2IDUuOTk3OCAyLjM0MTUxIDYuOTM2OSA1LjMyMDM3eiIgZmlsbD0iIzM0ODVjNCIvPjwvZz48L3N2Zz4=';\n    this._readyState = typeof window === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.Loadable;\n    this._connecting = false;\n    this._wallet = null;\n    this._publicKey = null;\n    this._network = config.network || WalletAdapterNetwork.Mainnet;\n  }\n\n  get publicKey() {\n    return this._publicKey;\n  }\n\n  get connecting() {\n    return this._connecting;\n  }\n\n  get readyState() {\n    return this._readyState;\n  }\n\n  async connect() {\n    try {\n      if (this.connected || this.connecting) return;\n      if (this._readyState !== WalletReadyState.Loadable) throw new WalletNotReadyError();\n      this._connecting = true;\n      let BloctoClass;\n\n      try {\n        ({\n          default: BloctoClass\n        } = await import('@blocto/sdk'));\n      } catch (error) {\n        throw new WalletLoadError(error === null || error === void 0 ? void 0 : error.message, error);\n      }\n\n      let wallet;\n\n      try {\n        wallet = new BloctoClass({\n          solana: {\n            net: this._network\n          }\n        }).solana;\n      } catch (error) {\n        throw new WalletConfigError(error === null || error === void 0 ? void 0 : error.message, error);\n      }\n\n      if (!wallet) throw new WalletConfigError();\n\n      if (!wallet.connected) {\n        try {\n          await wallet.connect();\n        } catch (error) {\n          throw new WalletConnectionError(error === null || error === void 0 ? void 0 : error.message, error);\n        }\n      }\n\n      const account = wallet.accounts[0];\n      if (!account) throw new WalletAccountError();\n      let publicKey;\n\n      try {\n        publicKey = new PublicKey(account);\n      } catch (error) {\n        throw new WalletPublicKeyError(error === null || error === void 0 ? void 0 : error.message, error);\n      }\n\n      this._wallet = wallet;\n      this._publicKey = publicKey;\n      this.emit('connect', publicKey);\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    } finally {\n      this._connecting = false;\n    }\n  }\n\n  async disconnect() {\n    const wallet = this._wallet;\n\n    if (wallet) {\n      this._wallet = null;\n      this._publicKey = null;\n\n      try {\n        await wallet.disconnect();\n      } catch (error) {\n        this.emit('error', new WalletDisconnectionError(error === null || error === void 0 ? void 0 : error.message, error));\n      }\n    }\n\n    this.emit('disconnect');\n  }\n\n  async sendTransaction(transaction, connection) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n\n      try {\n        transaction.feePayer = transaction.feePayer || this.publicKey || undefined;\n        transaction.recentBlockhash = transaction.recentBlockhash || (await connection.getRecentBlockhash('finalized')).blockhash;\n        const {\n          signers\n        } = options;\n\n        if (signers === null || signers === void 0 ? void 0 : signers.length) {\n          transaction = await wallet.convertToProgramWalletTransaction(transaction);\n          transaction.partialSign(...signers);\n        }\n\n        return await wallet.signAndSendTransaction(transaction, connection);\n      } catch (error) {\n        throw new WalletSendTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n\n}","map":{"version":3,"mappings":"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","names":["BaseWalletAdapter","WalletAccountError","WalletAdapterNetwork","WalletConfigError","WalletConnectionError","WalletDisconnectionError","WalletLoadError","WalletNotConnectedError","WalletNotReadyError","WalletPublicKeyError","WalletReadyState","WalletSendTransactionError","PublicKey","BloctoWalletName","BloctoWalletAdapter","constructor","config","window","Unsupported","Loadable","_connecting","_wallet","_publicKey","_network","network","Mainnet","publicKey","connecting","readyState","_readyState","connect","connected","BloctoClass","default","error","message","wallet","solana","net","account","accounts","emit","disconnect","sendTransaction","transaction","connection","options","feePayer","undefined","recentBlockhash","getRecentBlockhash","blockhash","signers","length","convertToProgramWalletTransaction","partialSign","signAndSendTransaction"],"sources":["/Users/bryan/solana-crowdfunding/.yarn/cache/@solana-wallet-adapter-blocto-npm-0.5.4-9d62626f2c-fb820ab0bb.zip/node_modules/@solana/wallet-adapter-blocto/src/adapter.ts"],"sourcesContent":["import type { default as Blocto, SolanaProviderInterface } from '@blocto/sdk';\nimport {\n    BaseWalletAdapter,\n    SendTransactionOptions,\n    WalletAccountError,\n    WalletAdapterNetwork,\n    WalletConfigError,\n    WalletConnectionError,\n    WalletDisconnectionError,\n    WalletLoadError,\n    WalletName,\n    WalletNotConnectedError,\n    WalletNotReadyError,\n    WalletPublicKeyError,\n    WalletReadyState,\n    WalletSendTransactionError,\n} from '@solana/wallet-adapter-base';\nimport { Connection, PublicKey, Transaction, TransactionSignature } from '@solana/web3.js';\n\nexport interface BloctoWalletAdapterConfig {\n    network?: WalletAdapterNetwork;\n}\n\nexport const BloctoWalletName = 'Blocto' as WalletName;\n\nexport class BloctoWalletAdapter extends BaseWalletAdapter {\n    name = BloctoWalletName;\n    url = 'https://blocto.app';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0ibTE5LjQ4MzggMTUuMjQ5Yy4yNzY5IDAgLjUwNDguMjA5OS41MzI1LjQ3ODhsLjAwMjIuMDQyOS0uMDA0My4xMTQyYy0uMzM1IDMuOTgzMy0zLjc5MDQgNy4xMTUxLTguMDAzNyA3LjExNTEtNC4xNzA2IDAtNy41OTg2My0zLjA2ODctNy45OTI2OS02Ljk5NDZsLS4wMTYzOC0uMTgxMS0uMDAxMDYtLjA1MzIuMDAxNzgtLjAzOThjLjAyNTk4LS4yNzA2LjI1NDg3LS40ODIzLjUzMjg5LS40ODIzeiIgZmlsbD0iI2FmZDhmNyIvPjxwYXRoIGQ9Im00LjMwMDA5IDFjMy43ODc1NSAwIDYuODI1ODEgMi45MDkxMSA2LjgyNTgxIDYuNTAyNzd2Ni4zNTM0M2MtLjAwMDQuMjkxNy0uMjM5Mi41Mjg0LS41MzQuNTI4OGwtNi4wNTc1OC4wMDMyYy0uMjk1MTEuMDAwNy0uNTM0MzItLjIzNjEtLjUzNDMyLS41Mjc4bC4wMDAzNi0xMi41NjM3NWMwLS4xNTE0OS4xMTQyNi0uMjc2MjIuMjYxOTktLjI5NDE4eiIgZmlsbD0iIzE4MmE3MSIvPjxwYXRoIGQ9Im0xOS42OTIxIDEyLjIzODMuMDM4OC4xMjgzLS4wMjg4LS4wODQ2Yy4xNjE2LjQ1MzQuMjY2Ni43NzY5LjMxNTMgMS4zNDEzLjAzMzUuMzg3OS0uMjU3LjcyODktLjY0ODUuNzYybC0uMDMwMy4wMDIyLTMuMDgwOS4wMDA3Yy0yLjEwNjMgMC0zLjgyMDQtMS40NzQxLTMuODc1Mi0zLjU0MjNsLS4wMDE0LS4xMDIxdi0zLjQ2NThjMC0uMjAxNTMuMTY5NC0uMzY5NTkuMzc0MS0uMzYwMDcgMy4zMDAzLjE1NDY2IDUuOTk3OCAyLjM0MTUxIDYuOTM2OSA1LjMyMDM3eiIgZmlsbD0iIzM0ODVjNCIvPjwvZz48L3N2Zz4=';\n\n    private _connecting: boolean;\n    private _wallet: SolanaProviderInterface | null;\n    private _publicKey: PublicKey | null;\n    private _network: string;\n    private _readyState: WalletReadyState =\n        typeof window === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.Loadable;\n\n    constructor(config: BloctoWalletAdapterConfig = {}) {\n        super();\n        this._connecting = false;\n        this._wallet = null;\n        this._publicKey = null;\n        this._network = config.network || WalletAdapterNetwork.Mainnet;\n    }\n\n    get publicKey(): PublicKey | null {\n        return this._publicKey;\n    }\n\n    get connecting(): boolean {\n        return this._connecting;\n    }\n\n    get readyState(): WalletReadyState {\n        return this._readyState;\n    }\n\n    async connect(): Promise<void> {\n        try {\n            if (this.connected || this.connecting) return;\n            if (this._readyState !== WalletReadyState.Loadable) throw new WalletNotReadyError();\n\n            this._connecting = true;\n\n            let BloctoClass: typeof Blocto;\n            try {\n                ({ default: BloctoClass } = await import('@blocto/sdk'));\n            } catch (error: any) {\n                throw new WalletLoadError(error?.message, error);\n            }\n\n            let wallet: SolanaProviderInterface | undefined;\n            try {\n                wallet = new BloctoClass({ solana: { net: this._network } }).solana;\n            } catch (error: any) {\n                throw new WalletConfigError(error?.message, error);\n            }\n\n            if (!wallet) throw new WalletConfigError();\n\n            if (!wallet.connected) {\n                try {\n                    await wallet.connect();\n                } catch (error: any) {\n                    throw new WalletConnectionError(error?.message, error);\n                }\n            }\n\n            const account = wallet.accounts[0];\n            if (!account) throw new WalletAccountError();\n\n            let publicKey: PublicKey;\n            try {\n                publicKey = new PublicKey(account);\n            } catch (error: any) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n\n            this._wallet = wallet;\n            this._publicKey = publicKey;\n\n            this.emit('connect', publicKey);\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        const wallet = this._wallet;\n        if (wallet) {\n            this._wallet = null;\n            this._publicKey = null;\n\n            try {\n                await wallet.disconnect();\n            } catch (error: any) {\n                this.emit('error', new WalletDisconnectionError(error?.message, error));\n            }\n        }\n\n        this.emit('disconnect');\n    }\n\n    async sendTransaction(\n        transaction: Transaction,\n        connection: Connection,\n        options: SendTransactionOptions = {}\n    ): Promise<TransactionSignature> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                transaction.feePayer = transaction.feePayer || this.publicKey || undefined;\n                transaction.recentBlockhash =\n                    transaction.recentBlockhash || (await connection.getRecentBlockhash('finalized')).blockhash;\n\n                const { signers } = options;\n                if (signers?.length) {\n                    transaction = await wallet.convertToProgramWalletTransaction(transaction);\n                    transaction.partialSign(...signers);\n                }\n\n                return await wallet.signAndSendTransaction(transaction, connection);\n            } catch (error: any) {\n                throw new WalletSendTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}